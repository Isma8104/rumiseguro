"use strict";(self.webpackChunkargon_dashboard_pro_angular=self.webpackChunkargon_dashboard_pro_angular||[]).push([[209],{62209:function(r,t,o){o.r(t),o.d(t,{OperatorsModule:function(){return F}});var e=o(38583),i=o(3679),a=o(75690),n=o(63423),s=o(22238),l=o(22176),u=o(37716),c=o(84678),g=o(46524),p=o(98295),d=o(67441),m=o(72458),f=o(49983);function Z(r,t){1&r&&(u.TgZ(0,"mat-option",21),u._uU(1,"Super Administrador"),u.qZA())}function h(r,t){1&r&&(u.TgZ(0,"mat-error"),u._uU(1," Tipo es obligatorio "),u.qZA())}function b(r,t){1&r&&(u.TgZ(0,"mat-error"),u._uU(1," Campo obligatorio "),u.qZA())}function A(r,t){1&r&&(u.TgZ(0,"mat-error"),u._uU(1," Campo obligatorio "),u.qZA())}function q(r,t){1&r&&(u.TgZ(0,"mat-error"),u._uU(1," Campo obligatorio "),u.qZA())}function T(r,t){if(1&r){const r=u.EpF();u.TgZ(0,"div",22),u.TgZ(1,"button",23),u.NdJ("click",function(){return u.CHM(r),u.oxw().resetPaswordOperator()}),u._uU(2," Restablecer Contrase\xf1a "),u.qZA(),u.qZA()}}let v=(()=>{class r{constructor(r,t,o,e,i,a){this.dialogRef=r,this.dialog=t,this.data=o,this.fb=e,this.api=i,this.events=a,this.title="",this.showPassword=!1,this.role="",r.disableClose=!0,this.title=o.title,this.operator=o.operator}ngOnInit(){this.role=localStorage.getItem("role"),this.createForm(),this.initFormPermissions()}createForm(){this.form=this.fb.group({ci:["Agregar"===this.title?"":this.operator.ci,[i.kI.required]],fullName:["Agregar"===this.title?"":this.operator.fullName,[i.kI.required]],email:["Agregar"===this.title?"":this.operator.email,[i.kI.required,i.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]],role:["Agregar"===this.title?"":this.operator.role,[i.kI.required]],password:["Agregar"===this.title?"123456":null,"Agregar"===this.title?[i.kI.required]:[]]})}initFormPermissions(){this.permissions=this.fb.group({p1:!1,p2:!1,p3:!1,p4:!1,p5:!1,p6:!1,p7:!1})}configOperator(){"Editar"===this.title?this.putOperator():this.postOperator()}validarNumeros(r){(r.keyCode<48||r.keyCode>57)&&(r.returnValue=!1)}postOperator(){this.api.postOperators(this.form.value).subscribe({next:r=>{200===r?.status?(0,l.w)("success","Correcto","Operador creado correctamente","btn btn-fill btn-info").then(r=>{this.close()}):(0,l.w)("error","Error",r.body.message,"btn btn-fill btn-info")},error:r=>{r.error.message.message.includes("email is already in use")?(0,l.w)("error","Error","El correo electr\xf3nico proporcionado ya est\xe1 registrado en el sistema. Por favor, ingresa un correo electr\xf3nico diferente.","btn btn-info"):(0,l.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}putOperator(){this.api.putOperators(this.form.value,this.operator._id).subscribe({next:r=>{200===r?.status?(0,l.w)("success","Correcto","Operador actualizado correctamente","btn btn-fill btn-info").then(r=>{this.close()}):(0,l.w)("error","Error",r.body.message,"btn btn-fill btn-info")},error:r=>{r.error.message.message.includes("email is already in use")?(0,l.w)("error","Error","El correo electr\xf3nico proporcionado ya est\xe1 registrado en el sistema. Por favor, ingresa un correo electr\xf3nico diferente.","btn btn-info"):(0,l.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}resetPaswordOperator(){this.api.resetPaswordOperator({password:"123456"},this.operator._id).subscribe({next:r=>{200===r?.status?(0,l.w)("success","Correcto","Contrase\xf1a actualizada correctamente","btn btn-fill btn-info").then(r=>{this.close()}):(0,l.w)("error","Error",r.body.message,"btn btn-fill btn-info")},error:r=>{(0,l.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}get errorsForm(){return this.form.controls}selectedRole(r){this.form.get("role").setValue(r)}close(){this.dialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(u.Y36(s.so),u.Y36(s.uw),u.Y36(s.WI),u.Y36(i.qu),u.Y36(c.s),u.Y36(g.ju))},r.\u0275cmp=u.Xpm({type:r,selectors:[["app-add-teams"]],decls:42,vars:9,consts:[[1,"modal-header1","text-left","row","mb-1"],[1,"modal-title"],["type","button",1,"close","mt--5","mr--2",3,"click"],[1,"fa","fa-times","icon-modal-close"],[1,"mat-typography"],["autocomplete","off",1,"form-horizontal",3,"formGroup"],[1,"row"],[1,"col-md-12"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["formControlName","role",3,"selectionChange"],["value","SUPER-ADMIN",4,"ngIf"],["value","ADMINISTRATOR"],["value","OPERATOR"],["value","USER"],[4,"ngIf"],["matInput","","name","ci","formControlName","ci",3,"keypress"],["matInput","","name","fullName","formControlName","fullName"],["matInput","","name","email","formControlName","email","oninput","javascript:this.value=this.value.toLowerCase();"],["mat-dialog-actions","","align","star","class","dialog-footer",4,"ngIf"],["mat-dialog-actions","","align","end",1,"dialog-footer"],["type","button",1,"btn","btn-fill","btn-info","btn-md",3,"disabled","click"],["value","SUPER-ADMIN"],["mat-dialog-actions","","align","star",1,"dialog-footer"],["type","button",1,"btn","btn-fill","btn-danger","btn-md",3,"click"]],template:function(r,t){1&r&&(u.TgZ(0,"div",0),u.TgZ(1,"h6",1),u._uU(2),u.qZA(),u.TgZ(3,"button",2),u.NdJ("click",function(){return t.close()}),u._UZ(4,"i",3),u.qZA(),u.qZA(),u.TgZ(5,"mat-dialog-content",4),u.TgZ(6,"form",5),u.TgZ(7,"div",6),u.TgZ(8,"div",7),u.TgZ(9,"div",6),u.TgZ(10,"mat-form-field",8),u.TgZ(11,"mat-label"),u._uU(12,"Rol"),u.qZA(),u.TgZ(13,"mat-select",9),u.NdJ("selectionChange",function(r){return t.selectedRole(r.value)}),u.YNc(14,Z,2,0,"mat-option",10),u.TgZ(15,"mat-option",11),u._uU(16,"Administrador"),u.qZA(),u.TgZ(17,"mat-option",12),u._uU(18,"Operador"),u.qZA(),u.TgZ(19,"mat-option",13),u._uU(20,"Usuario"),u.qZA(),u.qZA(),u.YNc(21,h,2,0,"mat-error",14),u.qZA(),u.TgZ(22,"mat-form-field",8),u.TgZ(23,"mat-label"),u._uU(24,"C\xe9dula"),u.qZA(),u.TgZ(25,"input",15),u.NdJ("keypress",function(r){return t.validarNumeros(r)}),u.qZA(),u.YNc(26,b,2,0,"mat-error",14),u.qZA(),u.TgZ(27,"mat-form-field",8),u.TgZ(28,"mat-label"),u._uU(29,"Nombre"),u.qZA(),u._UZ(30,"input",16),u.YNc(31,A,2,0,"mat-error",14),u.qZA(),u.TgZ(32,"mat-form-field",8),u.TgZ(33,"mat-label"),u._uU(34,"Correo Electr\xf3nico"),u.qZA(),u._UZ(35,"input",17),u.YNc(36,q,2,0,"mat-error",14),u.qZA(),u._UZ(37,"hr"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(38,T,3,0,"div",18),u.TgZ(39,"div",19),u.TgZ(40,"button",20),u.NdJ("click",function(){return t.configOperator()}),u._uU(41," Guardar "),u.qZA(),u.qZA()),2&r&&(u.xp6(2),u.hij("",t.title," Operador"),u.xp6(4),u.Q6J("formGroup",t.form),u.xp6(8),u.Q6J("ngIf","SUPER-ADMIN"===t.role),u.xp6(7),u.Q6J("ngIf",t.errorsForm.role.touched&&(null==t.errorsForm.role.errors?null:t.errorsForm.role.errors.required)),u.xp6(5),u.Q6J("ngIf",t.errorsForm.ci.touched&&(null==t.errorsForm.ci.errors?null:t.errorsForm.ci.errors.required)),u.xp6(5),u.Q6J("ngIf",t.errorsForm.fullName.touched&&(null==t.errorsForm.fullName.errors?null:t.errorsForm.fullName.errors.required)),u.xp6(5),u.Q6J("ngIf",t.errorsForm.email.touched&&(null==t.errorsForm.email.errors?null:t.errorsForm.email.errors.required)),u.xp6(2),u.Q6J("ngIf","Editar"===t.title),u.xp6(2),u.Q6J("disabled",!t.form.valid))},directives:[s.xY,i._Y,i.JL,i.sg,p.KE,p.hX,d.gD,i.JJ,i.u,e.O5,m.ey,f.Nt,i.Fj,s.H8,p.TO],styles:[""]}),r})();var _=o(99692);function w(r,t){if(1&r){const r=u.EpF();u.TgZ(0,"tr"),u.TgZ(1,"td",20),u._uU(2),u.qZA(),u.TgZ(3,"td",20),u._uU(4),u.qZA(),u.TgZ(5,"td",20),u._uU(6),u.qZA(),u.TgZ(7,"td",20),u._uU(8),u.qZA(),u.TgZ(9,"td",21),u.TgZ(10,"a",22),u.NdJ("click",function(){const t=u.CHM(r).$implicit;return u.oxw(2).openModal("Editar",t)}),u._UZ(11,"i",23),u.qZA(),u.qZA(),u.qZA()}if(2&r){const r=t.$implicit;u.xp6(2),u.Oqu(null==r?null:r.ci),u.xp6(2),u.Oqu(null==r?null:r.fullName),u.xp6(2),u.Oqu(null==r?null:r.email),u.xp6(2),u.Oqu(null==r?null:r.role)}}function N(r,t){if(1&r&&(u.TgZ(0,"tbody"),u.YNc(1,w,12,4,"tr",19),u.qZA()),2&r){const r=u.oxw();u.xp6(1),u.Q6J("ngForOf",r.operators)}}function U(r,t){1&r&&(u.TgZ(0,"p",24),u._uU(1,"No existen registros"),u.qZA())}function x(r,t){if(1&r){const r=u.EpF();u.TgZ(0,"div",1),u.TgZ(1,"div",2),u.TgZ(2,"div",25),u.TgZ(3,"mat-paginator",26,27),u.NdJ("page",function(t){return u.CHM(r),u.oxw().changePage(t)}),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&r){const r=u.oxw();u.xp6(3),u.Q6J("length",r.pagination.total)("pageSize",r.pagination.itemsPage)}}const O=[{path:"",children:[{path:"",component:(()=>{class r{constructor(r,t,o,e){this.dialog=r,this.fb=t,this.api=o,this.router=e,this.operators=[],this.pagination={page:1,pages:1,itemsPage:10,total:1},this.wordToSearch="",this.count=0}ngOnInit(){this.createForm(),this.getOperators()}createForm(){this.searchForm=this.fb.group({value:[""]})}getOperators(){this.wordToSearch=this.searchForm.value.value,this.api.getOperators(this.pagination.page,this.pagination.itemsPage,this.wordToSearch).subscribe({next:r=>{this.operators=r.body.administrators,this.pagination=r.body.pagination,this.count=r.body.pagination.total},error:r=>{(0,l.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")}})}openModal(r,t){this.dialog.open(v,{width:"400px",data:{title:r,operator:t}}).afterClosed().subscribe(r=>{this.getOperators()})}changePage(r){this.pagination.page=r.pageIndex+1,this.getOperators()}}return r.\u0275fac=function(t){return new(t||r)(u.Y36(s.uw),u.Y36(i.qu),u.Y36(c.s),u.Y36(n.F0))},r.\u0275cmp=u.Xpm({type:r,selectors:[["app-operators"]],decls:39,vars:5,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"title"],[1,"category"],[1,"form-horizontal",3,"formGroup"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["matInput","","name","value","formControlName","value",3,"keyup"],[1,"content","table-responsive","table-full-width"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","msg-empty",4,"ngIf"],["class","container-fluid",4,"ngIf"],["id","addBtn",1,"btn","btn-icon","btn-round","btn-twitter",3,"click"],["src","assets/img/icons/mas.png"],[4,"ngFor","ngForOf"],[1,"td-size"],[1,"td-actions","text-right"],["rel","tooltip","title","Editar",1,"btn","btn-warning","btn-simple","btn-xs",3,"click"],[1,"fa","fa-edit"],[1,"msg-empty"],[1,"col","d-flex","justify-content-end"],["showFirstLastButtons","",3,"length","pageSize","page"],["paginator",""]],template:function(r,t){1&r&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"div",4),u.TgZ(5,"div",5),u.TgZ(6,"h4",6),u._uU(7),u.qZA(),u._UZ(8,"p",7),u.qZA(),u._UZ(9,"br"),u.TgZ(10,"form",8),u.TgZ(11,"div",3),u.TgZ(12,"div",2),u.TgZ(13,"mat-form-field",9),u.TgZ(14,"mat-label"),u._uU(15,"Buscar por nombre"),u.qZA(),u.TgZ(16,"input",10),u.NdJ("keyup",function(){return t.getOperators()}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(17,"br"),u.TgZ(18,"div",11),u.TgZ(19,"table",12),u.TgZ(20,"thead"),u.TgZ(21,"tr"),u.TgZ(22,"th"),u._uU(23,"C\xe9dula"),u.qZA(),u.TgZ(24,"th"),u._uU(25,"Nombre"),u.qZA(),u.TgZ(26,"th"),u._uU(27,"Correo"),u.qZA(),u.TgZ(28,"th"),u._uU(29,"Rol"),u.qZA(),u.TgZ(30,"th",13),u._uU(31,"Acciones"),u.qZA(),u.qZA(),u.qZA(),u.YNc(32,N,2,1,"tbody",14),u.qZA(),u.YNc(33,U,2,0,"p",15),u.qZA(),u._UZ(34,"br"),u.YNc(35,x,5,2,"div",16),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(36,"caption"),u.TgZ(37,"button",17),u.NdJ("click",function(){return t.openModal("Agregar")}),u._UZ(38,"img",18),u.qZA(),u.qZA()),2&r&&(u.xp6(7),u.hij("Operadores: ",t.count,""),u.xp6(3),u.Q6J("formGroup",t.searchForm),u.xp6(22),u.Q6J("ngIf",t.operators.length>0),u.xp6(1),u.Q6J("ngIf",0===t.operators.length),u.xp6(2),u.Q6J("ngIf",0!==(null==t.operators?null:t.operators.length)))},directives:[i._Y,i.JL,i.sg,p.KE,p.hX,f.Nt,i.Fj,i.JJ,i.u,e.O5,e.sg,_.NW],styles:[""]}),r})()}]}];var I=o(12640),y=o(44368);let F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({providers:[g.ju],imports:[[e.ez,i.u5,i.UX,a.P4.forRoot(),n.Bz.forChild(O),I.q,y.bB]]}),r})()}}]);