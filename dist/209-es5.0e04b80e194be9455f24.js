!function(){"use strict";function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function t(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,o(i.key),i)}}function e(r,e,o){return e&&t(r.prototype,e),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}function o(r){var t=function(r,t){if("object"!=typeof r||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var o=e.call(r,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==typeof t?t:t+""}(self.webpackChunkargon_dashboard_pro_angular=self.webpackChunkargon_dashboard_pro_angular||[]).push([[209],{62209:function(t,o,i){i.r(o),i.d(o,{OperatorsModule:function(){return J}});var n=i(38583),a=i(3679),l=i(75690),s=i(63423),u=i(22238),c=i(22176),g=i(37716),p=i(84678),f=i(46524),d=i(98295),m=i(67441),Z=i(72458),h=i(49983);function b(r,t){1&r&&(g.TgZ(0,"mat-option",21),g._uU(1,"Super Administrador"),g.qZA())}function v(r,t){1&r&&(g.TgZ(0,"mat-error"),g._uU(1," Tipo es obligatorio "),g.qZA())}function A(r,t){1&r&&(g.TgZ(0,"mat-error"),g._uU(1," Campo obligatorio "),g.qZA())}function q(r,t){1&r&&(g.TgZ(0,"mat-error"),g._uU(1," Campo obligatorio "),g.qZA())}function T(r,t){1&r&&(g.TgZ(0,"mat-error"),g._uU(1," Campo obligatorio "),g.qZA())}function y(r,t){if(1&r){var e=g.EpF();g.TgZ(0,"div",22),g.TgZ(1,"button",23),g.NdJ("click",function(){return g.CHM(e),g.oxw().resetPaswordOperator()}),g._uU(2," Restablecer Contrase\xf1a "),g.qZA(),g.qZA()}}var w,_=((w=function(){return e(function t(e,o,i,n,a,l){r(this,t),this.dialogRef=e,this.dialog=o,this.data=i,this.fb=n,this.api=a,this.events=l,this.title="",this.showPassword=!1,this.role="",e.disableClose=!0,this.title=i.title,this.operator=i.operator},[{key:"ngOnInit",value:function(){this.role=localStorage.getItem("role"),this.createForm(),this.initFormPermissions()}},{key:"createForm",value:function(){this.form=this.fb.group({ci:["Agregar"===this.title?"":this.operator.ci,[a.kI.required]],fullName:["Agregar"===this.title?"":this.operator.fullName,[a.kI.required]],email:["Agregar"===this.title?"":this.operator.email,[a.kI.required,a.kI.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]],role:["Agregar"===this.title?"":this.operator.role,[a.kI.required]],password:["Agregar"===this.title?"123456":null,"Agregar"===this.title?[a.kI.required]:[]]})}},{key:"initFormPermissions",value:function(){this.permissions=this.fb.group({p1:!1,p2:!1,p3:!1,p4:!1,p5:!1,p6:!1,p7:!1})}},{key:"configOperator",value:function(){"Editar"===this.title?this.putOperator():this.postOperator()}},{key:"validarNumeros",value:function(r){(r.keyCode<48||r.keyCode>57)&&(r.returnValue=!1)}},{key:"postOperator",value:function(){var r=this;this.api.postOperators(this.form.value).subscribe({next:function(t){200===(null==t?void 0:t.status)?(0,c.w)("success","Correcto","Operador creado correctamente","btn btn-fill btn-info").then(function(t){r.close()}):(0,c.w)("error","Error",t.body.message,"btn btn-fill btn-info")},error:function(r){r.error.message.message.includes("email is already in use")?(0,c.w)("error","Error","El correo electr\xf3nico proporcionado ya est\xe1 registrado en el sistema. Por favor, ingresa un correo electr\xf3nico diferente.","btn btn-info"):(0,c.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}},{key:"putOperator",value:function(){var r=this;this.api.putOperators(this.form.value,this.operator._id).subscribe({next:function(t){200===(null==t?void 0:t.status)?(0,c.w)("success","Correcto","Operador actualizado correctamente","btn btn-fill btn-info").then(function(t){r.close()}):(0,c.w)("error","Error",t.body.message,"btn btn-fill btn-info")},error:function(r){r.error.message.message.includes("email is already in use")?(0,c.w)("error","Error","El correo electr\xf3nico proporcionado ya est\xe1 registrado en el sistema. Por favor, ingresa un correo electr\xf3nico diferente.","btn btn-info"):(0,c.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}},{key:"resetPaswordOperator",value:function(){var r=this;this.api.resetPaswordOperator({password:"123456"},this.operator._id).subscribe({next:function(t){200===(null==t?void 0:t.status)?(0,c.w)("success","Correcto","Contrase\xf1a actualizada correctamente","btn btn-fill btn-info").then(function(t){r.close()}):(0,c.w)("error","Error",t.body.message,"btn btn-fill btn-info")},error:function(r){(0,c.w)("error","Error","Algo ha salido mal, por favor int\xe9ntalo de nuevo m\xe1s tarde.","btn btn-info")}})}},{key:"errorsForm",get:function(){return this.form.controls}},{key:"selectedRole",value:function(r){this.form.get("role").setValue(r)}},{key:"close",value:function(){this.dialogRef.close()}}])}()).\u0275fac=function(r){return new(r||w)(g.Y36(u.so),g.Y36(u.uw),g.Y36(u.WI),g.Y36(a.qu),g.Y36(p.s),g.Y36(f.ju))},w.\u0275cmp=g.Xpm({type:w,selectors:[["app-add-teams"]],decls:42,vars:9,consts:[[1,"modal-header1","text-left","row","mb-1"],[1,"modal-title"],["type","button",1,"close","mt--5","mr--2",3,"click"],[1,"fa","fa-times","icon-modal-close"],[1,"mat-typography"],["autocomplete","off",1,"form-horizontal",3,"formGroup"],[1,"row"],[1,"col-md-12"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["formControlName","role",3,"selectionChange"],["value","SUPER-ADMIN",4,"ngIf"],["value","ADMINISTRATOR"],["value","OPERATOR"],["value","USER"],[4,"ngIf"],["matInput","","name","ci","formControlName","ci",3,"keypress"],["matInput","","name","fullName","formControlName","fullName"],["matInput","","name","email","formControlName","email","oninput","javascript:this.value=this.value.toLowerCase();"],["mat-dialog-actions","","align","star","class","dialog-footer",4,"ngIf"],["mat-dialog-actions","","align","end",1,"dialog-footer"],["type","button",1,"btn","btn-fill","btn-info","btn-md",3,"disabled","click"],["value","SUPER-ADMIN"],["mat-dialog-actions","","align","star",1,"dialog-footer"],["type","button",1,"btn","btn-fill","btn-danger","btn-md",3,"click"]],template:function(r,t){1&r&&(g.TgZ(0,"div",0),g.TgZ(1,"h6",1),g._uU(2),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.close()}),g._UZ(4,"i",3),g.qZA(),g.qZA(),g.TgZ(5,"mat-dialog-content",4),g.TgZ(6,"form",5),g.TgZ(7,"div",6),g.TgZ(8,"div",7),g.TgZ(9,"div",6),g.TgZ(10,"mat-form-field",8),g.TgZ(11,"mat-label"),g._uU(12,"Rol"),g.qZA(),g.TgZ(13,"mat-select",9),g.NdJ("selectionChange",function(r){return t.selectedRole(r.value)}),g.YNc(14,b,2,0,"mat-option",10),g.TgZ(15,"mat-option",11),g._uU(16,"Administrador"),g.qZA(),g.TgZ(17,"mat-option",12),g._uU(18,"Operador"),g.qZA(),g.TgZ(19,"mat-option",13),g._uU(20,"Usuario"),g.qZA(),g.qZA(),g.YNc(21,v,2,0,"mat-error",14),g.qZA(),g.TgZ(22,"mat-form-field",8),g.TgZ(23,"mat-label"),g._uU(24,"C\xe9dula"),g.qZA(),g.TgZ(25,"input",15),g.NdJ("keypress",function(r){return t.validarNumeros(r)}),g.qZA(),g.YNc(26,A,2,0,"mat-error",14),g.qZA(),g.TgZ(27,"mat-form-field",8),g.TgZ(28,"mat-label"),g._uU(29,"Nombre"),g.qZA(),g._UZ(30,"input",16),g.YNc(31,q,2,0,"mat-error",14),g.qZA(),g.TgZ(32,"mat-form-field",8),g.TgZ(33,"mat-label"),g._uU(34,"Correo Electr\xf3nico"),g.qZA(),g._UZ(35,"input",17),g.YNc(36,T,2,0,"mat-error",14),g.qZA(),g._UZ(37,"hr"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(38,y,3,0,"div",18),g.TgZ(39,"div",19),g.TgZ(40,"button",20),g.NdJ("click",function(){return t.configOperator()}),g._uU(41," Guardar "),g.qZA(),g.qZA()),2&r&&(g.xp6(2),g.hij("",t.title," Operador"),g.xp6(4),g.Q6J("formGroup",t.form),g.xp6(8),g.Q6J("ngIf","SUPER-ADMIN"===t.role),g.xp6(7),g.Q6J("ngIf",t.errorsForm.role.touched&&(null==t.errorsForm.role.errors?null:t.errorsForm.role.errors.required)),g.xp6(5),g.Q6J("ngIf",t.errorsForm.ci.touched&&(null==t.errorsForm.ci.errors?null:t.errorsForm.ci.errors.required)),g.xp6(5),g.Q6J("ngIf",t.errorsForm.fullName.touched&&(null==t.errorsForm.fullName.errors?null:t.errorsForm.fullName.errors.required)),g.xp6(5),g.Q6J("ngIf",t.errorsForm.email.touched&&(null==t.errorsForm.email.errors?null:t.errorsForm.email.errors.required)),g.xp6(2),g.Q6J("ngIf","Editar"===t.title),g.xp6(2),g.Q6J("disabled",!t.form.valid))},directives:[u.xY,a._Y,a.JL,a.sg,d.KE,d.hX,m.gD,a.JJ,a.u,n.O5,Z.ey,h.Nt,a.Fj,u.H8,d.TO],styles:[""]}),w),N=i(99692);function k(r,t){if(1&r){var e=g.EpF();g.TgZ(0,"tr"),g.TgZ(1,"td",20),g._uU(2),g.qZA(),g.TgZ(3,"td",20),g._uU(4),g.qZA(),g.TgZ(5,"td",20),g._uU(6),g.qZA(),g.TgZ(7,"td",20),g._uU(8),g.qZA(),g.TgZ(9,"td",21),g.TgZ(10,"a",22),g.NdJ("click",function(){var r=g.CHM(e).$implicit;return g.oxw(2).openModal("Editar",r)}),g._UZ(11,"i",23),g.qZA(),g.qZA(),g.qZA()}if(2&r){var o=t.$implicit;g.xp6(2),g.Oqu(null==o?null:o.ci),g.xp6(2),g.Oqu(null==o?null:o.fullName),g.xp6(2),g.Oqu(null==o?null:o.email),g.xp6(2),g.Oqu(null==o?null:o.role)}}function U(r,t){if(1&r&&(g.TgZ(0,"tbody"),g.YNc(1,k,12,4,"tr",19),g.qZA()),2&r){var e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.operators)}}function x(r,t){1&r&&(g.TgZ(0,"p",24),g._uU(1,"No existen registros"),g.qZA())}function O(r,t){if(1&r){var e=g.EpF();g.TgZ(0,"div",1),g.TgZ(1,"div",2),g.TgZ(2,"div",25),g.TgZ(3,"mat-paginator",26,27),g.NdJ("page",function(r){return g.CHM(e),g.oxw().changePage(r)}),g.qZA(),g.qZA(),g.qZA(),g.qZA()}if(2&r){var o=g.oxw();g.xp6(3),g.Q6J("length",o.pagination.total)("pageSize",o.pagination.itemsPage)}}var I=[{path:"",children:[{path:"",component:function(){var t=function(){return e(function t(e,o,i,n){r(this,t),this.dialog=e,this.fb=o,this.api=i,this.router=n,this.operators=[],this.pagination={page:1,pages:1,itemsPage:10,total:1},this.wordToSearch="",this.count=0},[{key:"ngOnInit",value:function(){this.createForm(),this.getOperators()}},{key:"createForm",value:function(){this.searchForm=this.fb.group({value:[""]})}},{key:"getOperators",value:function(){var r=this;this.wordToSearch=this.searchForm.value.value,this.api.getOperators(this.pagination.page,this.pagination.itemsPage,this.wordToSearch).subscribe({next:function(t){r.operators=t.body.administrators,r.pagination=t.body.pagination,r.count=t.body.pagination.total},error:function(r){(0,c.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")}})}},{key:"openModal",value:function(r,t){var e=this;this.dialog.open(_,{width:"400px",data:{title:r,operator:t}}).afterClosed().subscribe(function(r){e.getOperators()})}},{key:"changePage",value:function(r){this.pagination.page=r.pageIndex+1,this.getOperators()}}])}();return t.\u0275fac=function(r){return new(r||t)(g.Y36(u.uw),g.Y36(a.qu),g.Y36(p.s),g.Y36(s.F0))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-operators"]],decls:39,vars:5,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"title"],[1,"category"],[1,"form-horizontal",3,"formGroup"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["matInput","","name","value","formControlName","value",3,"keyup"],[1,"content","table-responsive","table-full-width"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","msg-empty",4,"ngIf"],["class","container-fluid",4,"ngIf"],["id","addBtn",1,"btn","btn-icon","btn-round","btn-twitter",3,"click"],["src","assets/img/icons/mas.png"],[4,"ngFor","ngForOf"],[1,"td-size"],[1,"td-actions","text-right"],["rel","tooltip","title","Editar",1,"btn","btn-warning","btn-simple","btn-xs",3,"click"],[1,"fa","fa-edit"],[1,"msg-empty"],[1,"col","d-flex","justify-content-end"],["showFirstLastButtons","",3,"length","pageSize","page"],["paginator",""]],template:function(r,t){1&r&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g.TgZ(6,"h4",6),g._uU(7),g.qZA(),g._UZ(8,"p",7),g.qZA(),g._UZ(9,"br"),g.TgZ(10,"form",8),g.TgZ(11,"div",3),g.TgZ(12,"div",2),g.TgZ(13,"mat-form-field",9),g.TgZ(14,"mat-label"),g._uU(15,"Buscar por nombre"),g.qZA(),g.TgZ(16,"input",10),g.NdJ("keyup",function(){return t.getOperators()}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(17,"br"),g.TgZ(18,"div",11),g.TgZ(19,"table",12),g.TgZ(20,"thead"),g.TgZ(21,"tr"),g.TgZ(22,"th"),g._uU(23,"C\xe9dula"),g.qZA(),g.TgZ(24,"th"),g._uU(25,"Nombre"),g.qZA(),g.TgZ(26,"th"),g._uU(27,"Correo"),g.qZA(),g.TgZ(28,"th"),g._uU(29,"Rol"),g.qZA(),g.TgZ(30,"th",13),g._uU(31,"Acciones"),g.qZA(),g.qZA(),g.qZA(),g.YNc(32,U,2,1,"tbody",14),g.qZA(),g.YNc(33,x,2,0,"p",15),g.qZA(),g._UZ(34,"br"),g.YNc(35,O,5,2,"div",16),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(36,"caption"),g.TgZ(37,"button",17),g.NdJ("click",function(){return t.openModal("Agregar")}),g._UZ(38,"img",18),g.qZA(),g.qZA()),2&r&&(g.xp6(7),g.hij("Operadores: ",t.count,""),g.xp6(3),g.Q6J("formGroup",t.searchForm),g.xp6(22),g.Q6J("ngIf",t.operators.length>0),g.xp6(1),g.Q6J("ngIf",0===t.operators.length),g.xp6(2),g.Q6J("ngIf",0!==(null==t.operators?null:t.operators.length)))},directives:[a._Y,a.JL,a.sg,d.KE,d.hX,h.Nt,a.Fj,a.JJ,a.u,n.O5,n.sg,N.NW],styles:[""]}),t}()}]}],F=i(12640),C=i(44368),J=function(){var t=e(function t(){r(this,t)});return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[f.ju],imports:[[n.ez,a.u5,a.UX,l.P4.forRoot(),s.Bz.forChild(I),F.q,C.bB]]}),t}()}}])}();