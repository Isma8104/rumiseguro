"use strict";(self.webpackChunkargon_dashboard_pro_angular=self.webpackChunkargon_dashboard_pro_angular||[]).push([[352],{24352:function(t,e,o){o.r(e),o.d(e,{NeighborhoodsModule:function(){return B}});var r=o(38583),i=o(3679),n=o(75690),a=o(63423),s=o(22238),l=o(81534),d=o(22176),c=o(37716),g=o(84678),p=o(46524),u=o(39209),h=o(76627),m=o(98295),f=o(49983);const Z=["mapCardRef"];function b(t,e){1&t&&(c.TgZ(0,"small",27),c._uU(1," * Latitud requerido "),c.qZA())}function x(t,e){1&t&&(c.TgZ(0,"small",27),c._uU(1," * Longitud requerido "),c.qZA())}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",23),c.TgZ(2,"label",10),c._uU(3,"Latitud"),c.qZA(),c.TgZ(4,"input",24),c.NdJ("keypress",function(e){return c.CHM(t),c.oxw().validarCampoLngLat(e)}),c.qZA(),c.YNc(5,b,2,0,"small",25),c.qZA(),c.TgZ(6,"div",23),c.TgZ(7,"label",10),c._uU(8,"Longitud"),c.qZA(),c.TgZ(9,"input",26),c.NdJ("keypress",function(e){return c.CHM(t),c.oxw().validarCampoLngLat(e)}),c.qZA(),c.YNc(10,x,2,0,"small",25),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(5),c.Q6J("ngIf",t.lat.errors&&t.lat.touched),c.xp6(5),c.Q6J("ngIf",t.lng.errors&&t.lng.touched)}}function q(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function T(t,e){if(1&t&&(c.TgZ(0,"div",6),c.TgZ(1,"mat-form-field",16),c.TgZ(2,"mat-label"),c._uU(3,"Identificador"),c.qZA(),c._UZ(4,"input",28),c.YNc(5,q,2,0,"mat-error",18),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(5),c.Q6J("ngIf",t.errorsForm.identifier.touched&&(null==t.errorsForm.identifier.errors?null:t.errorsForm.identifier.errors.required))}}function v(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function _(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function C(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}let w=(()=>{class t{constructor(t,e,o,r,i,n){this.dialogRef=t,this.dialog=e,this.data=o,this.fb=r,this.api=i,this.events=n,this.title="",this.idTeam="",this.latE=null,this.lngE=null,this.heightE="300px",this.files=[],t.disableClose=!0,this.title=o.title,this.neighs=o.neighs,this.idTeam=o.idTeam}ngOnInit(){this.createForm()}clickMap(){this.mapCardRef.clickMap()}getUserLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{this.latE=t.coords.latitude,this.lngE=t.coords.longitude,this.form.patchValue({lat:t.coords.latitude}),this.form.patchValue({lng:t.coords.longitude}),void 0!==this.mapCardRef.markerVectorLayer&&this.mapCardRef.clearMarker(),this.mapCardRef.setMarker(t.coords),this.mapCardRef.centerMap(this.lngE,this.latE,15)}):console.log("User not allow")}createForm(){this.latE="Agregar"===this.title?"-2.8974172":this.neighs.lat,this.lngE="Agregar"===this.title?"-79.0070696":this.neighs.lng,this.form=this.fb.group({name:["Agregar"===this.title?"":this.neighs.name,[i.kI.required]],identifier:["Agregar"===this.title?"":this.neighs.identifier,[i.kI.required]],description:["Agregar"===this.title?"":this.neighs.description,[i.kI.required]],radius:["Agregar"===this.title?"":this.neighs.radius,[i.kI.required]],team:[this.idTeam],lat:["Agregar"===this.title?"-2.8974172":this.neighs.lat],lng:["Agregar"===this.title?"-79.0070696":this.neighs.lng]}),this.form.get("identifier").disable()}setLatLng(t){this.form.patchValue({lat:t.lat}),this.form.patchValue({lng:t.lng})}configNeighs(){"Editar"===this.title?this.putneighss():this.postNeighborhood()}postNeighborhood(){(0,l.Av)(),this.api.postNeighborhood(this.form.value).subscribe(t=>{(0,l.kU)(),(0,d.w)("success","Correcto","Central creado correctamente","btn btn-fill btn-info").then(t=>{this.close()})},t=>{(0,l.kU)(),(0,d.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")})}putneighss(){(0,l.Av)(),this.api.putNeighborhood(this.form.value,this.neighs._id).subscribe(t=>{(0,l.kU)(),(0,d.w)("success","Correcto","Central actualizado correctamente","btn btn-fill btn-info").then(t=>{this.close()})},t=>{(0,l.kU)(),(0,d.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")})}get errorsForm(){return this.form.controls}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.so),c.Y36(s.uw),c.Y36(s.WI),c.Y36(i.qu),c.Y36(g.s),c.Y36(p.ju))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-add-neighborhoods"]],viewQuery:function(t,e){if(1&t&&c.Gf(Z,5),2&t){let t;c.iGM(t=c.CRH())&&(e.mapCardRef=t.first)}},decls:45,vars:12,consts:[[1,"modal-header1","text-left","row","mb-1"],[1,"modal-title"],["type","button",1,"close","mt--5","mr--2",3,"click"],[1,"fa","fa-times","icon-modal-close"],[1,"mat-typography"],["autocomplete","off",1,"form-horizontal",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","mt-2"],[1,"col-xs-12","col-sm-12","col-md-12","col-lg-12"],[1,"form-control-label"],[3,"lat","lng","opt","heightE","coorsEmit"],["mapCardRef",""],[1,"btn","btn-primary","map-button",3,"click"],["id","icon-loc"],["class","row",4,"ngIf"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["matInput","","name","name","formControlName","name","oninput","javascript:this.value=this.value.toUpperCase();"],[4,"ngIf"],["matInput","","name","description","formControlName","description"],["matInput","","name","radius","formControlName","radius"],["mat-dialog-actions","","align","end",1,"dialog-footer"],["type","button",1,"btn","btn-fill","btn-info","btn-md",3,"disabled","click"],[1,"col-md-6"],["placeholder","Latitud","type","text","formControlName","lat","required","true",1,"form-control",3,"keypress"],["class","text-danger",4,"ngIf"],["placeholder","Longitud","type","text","formControlName","lng","required","true",1,"form-control",3,"keypress"],[1,"text-danger"],["matInput","","name","identifier","formControlName","identifier"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h6",1),c._uU(2),c.qZA(),c.TgZ(3,"button",2),c.NdJ("click",function(){return e.close()}),c._UZ(4,"i",3),c.qZA(),c.qZA(),c.TgZ(5,"mat-dialog-content",4),c.TgZ(6,"form",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"div",9),c.TgZ(11,"label",10),c._uU(12," Ubicaci\xf3n "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"div",6),c.TgZ(14,"div",9),c.TgZ(15,"app-map-card",11,12),c.NdJ("coorsEmit",function(t){return e.setLatLng(t)}),c.qZA(),c.TgZ(17,"button",13),c.NdJ("click",function(){return e.getUserLocation()}),c.TgZ(18,"mat-icon",14),c._uU(19,"location_on"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(20,"br"),c.YNc(21,A,11,2,"div",15),c.qZA(),c.TgZ(22,"div",7),c.YNc(23,T,6,1,"div",15),c.TgZ(24,"div",6),c.TgZ(25,"mat-form-field",16),c.TgZ(26,"mat-label"),c._uU(27,"Nombre"),c.qZA(),c._UZ(28,"input",17),c.YNc(29,v,2,0,"mat-error",18),c.qZA(),c.qZA(),c.TgZ(30,"div",6),c.TgZ(31,"mat-form-field",16),c.TgZ(32,"mat-label"),c._uU(33,"Descripci\xf3n"),c.qZA(),c._UZ(34,"input",19),c.YNc(35,_,2,0,"mat-error",18),c.qZA(),c.qZA(),c.TgZ(36,"div",6),c.TgZ(37,"mat-form-field",16),c.TgZ(38,"mat-label"),c._uU(39,"Radio cobertura (m)"),c.qZA(),c._UZ(40,"input",20),c.YNc(41,C,2,0,"mat-error",18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(42,"div",21),c.TgZ(43,"button",22),c.NdJ("click",function(){return e.configNeighs()}),c._uU(44," Guardar "),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.hij("",e.title," Central"),c.xp6(4),c.Q6J("formGroup",e.form),c.xp6(9),c.Q6J("lat",e.latE)("lng",e.lngE)("opt","click")("heightE",e.heightE),c.xp6(6),c.Q6J("ngIf",!1),c.xp6(2),c.Q6J("ngIf","Editar"===e.title),c.xp6(6),c.Q6J("ngIf",e.errorsForm.name.touched&&(null==e.errorsForm.name.errors?null:e.errorsForm.name.errors.required)),c.xp6(6),c.Q6J("ngIf",e.errorsForm.description.touched&&(null==e.errorsForm.description.errors?null:e.errorsForm.description.errors.required)),c.xp6(6),c.Q6J("ngIf",e.errorsForm.radius.touched&&(null==e.errorsForm.radius.errors?null:e.errorsForm.radius.errors.required)),c.xp6(2),c.Q6J("disabled",!e.form.valid))},directives:[s.xY,i._Y,i.JL,i.sg,u.P,h.Hw,r.O5,m.KE,m.hX,f.Nt,i.Fj,i.JJ,i.u,s.H8,i.Q7,m.TO],styles:['@charset "UTF-8";.custom-dropzone[_ngcontent-%COMP%]{height:80px;width:auto;background:#fff;color:#000;border:5px dashed #fff;border-radius:5px;box-shadow:0 1px 3px 1px #ced4da;font-size:20px;padding-top:30px}ngx-dropzone[_ngcontent-%COMP%], .custom-dropzone[_ngcontent-%COMP%]{margin-top:20px;margin-left:auto;margin-right:auto;display:block}.custom-dropzone[_ngcontent-%COMP%]{height:200px;width:auto;background:#fff;color:#000;border:5px dashed #fff;border-radius:5px;box-shadow:0 1px 3px 1px #ced4da;font-size:20px;padding-top:30px}.custom-dropzone-p[_ngcontent-%COMP%]{height:150px;background:#fff;color:#000;border:2px dashed #000;border-radius:5px;box-shadow:0 1px 3px 1px #ced4da;font-size:20px}.custom-dropzone-p.ngx-dz-hovered[_ngcontent-%COMP%]{border:5px solid #eb4f4f}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:5px solid black}#preview[_ngcontent-%COMP%]{display:flex;height:100px;min-height:100px;min-width:200px;max-width:200px;justify-content:center;text-align:center;align-items:center;margin:10px;border-radius:5px;position:relative}.center[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;display:block}.map-container[_ngcontent-%COMP%]{position:relative}.map-button[_ngcontent-%COMP%]{position:absolute;border:1px solid #007bff;background-color:#007bff;border-top-left-radius:70%;color:#fff;width:5vh!important;height:5vh!important;bottom:0px;right:15px;z-index:1000}#icon-loc[_ngcontent-%COMP%]{font-size:25px;position:absolute;top:12px;left:12px}']}),t})();var N=o(67441),U=o(72458);function y(t,e){if(1&t&&(c.TgZ(0,"mat-option",20),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.Oqu(t)}}function I(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function k(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function E(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1," Campo obligatorio "),c.qZA())}function F(t,e){if(1&t&&(c.TgZ(0,"td"),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t," ")}}function J(t,e){if(1&t&&(c.TgZ(0,"tr"),c.YNc(1,F,2,1,"td",19),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("ngForOf",t)}}let O=(()=>{class t{constructor(t,e,o,r){this.dialogRef=t,this.data=e,this.fb=o,this.api=r,this.title="",this.central=null,this.centralName="",this.options=["Estado de la bater\xeda","Estado del sensor","Estado de corriente"],this.central=this.data.central,this.centralName=this.central.name}ngOnInit(){this.createForm()}createForm(){const t=new Date,e=new Date(t);e.setDate(t.getDate()-7),this.form=this.fb.group({typeEvent:["",[i.kI.required]],startDate:[new Date(e.getFullYear(),e.getMonth(),e.getDate()).toISOString().substring(0,10),[i.kI.required]],endDate:[new Date(t.getFullYear(),t.getMonth(),t.getDate()).toISOString().substring(0,10),[i.kI.required]]})}identifyQueryType(t){let e;switch(t){case"Estado de la bater\xeda":e="battery-status";break;case"Estado del sensor":e="sensor-status";break;case"Estado de corriente":e="power-outage";break;default:e=""}return e}showInformation(t,e){let o,r=[],i=[];if("Estado de la bater\xeda"===t)for(let n=0;n<e.boxStats.length;n++){o="Estado de la bater\xeda",i.push(o),o=e.boxStats[n].createdAt.split("T")[0],i.push(o);const t=new Date(e.boxStats[n].createdAt);o=t.getHours()+":"+t.getMinutes(),i.push(o),o=e.boxStats[n].batteryStatus+" V",i.push(o),r.push(i),o="",i=[]}else if("Estado del sensor"===t)for(let n=0;n<e.boxStats.length;n++){o="Estado del sensor",i.push(o),o=e.boxStats[n].createdAt.split("T")[0],i.push(o);const t=new Date(e.boxStats[n].createdAt);o=t.getHours()+":"+t.getMinutes(),i.push(o),o="0"===e.boxStats[n].sensorStatus?"Caja cerrada":"Caja abierta",i.push(o),r.push(i),o="",i=[]}else if("Estado de corriente"===t)for(let n=0;n<e.boxStats.length;n++){o="Estado de corriente",i.push(o),o=e.boxStats[n].createdAt.split("T")[0],i.push(o);const t=new Date(e.boxStats[n].createdAt);o=t.getHours()+":"+t.getMinutes(),i.push(o),o="0"===e.boxStats[n].powerOutage?"No conectado":"Conectado",i.push(o),r.push(i),o="",i=[]}return r}searchInfo(){const t=this.identifyQueryType(this.form.get("typeEvent").value);this.api.getCentralInformation(t,this.central.identifier).subscribe(t=>{this.information=this.showInformation(this.form.get("typeEvent").value,t)},t=>{(0,d.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")})}onSeleccionarOpcion(){console.log("Opci\xf3n seleccionada:",this.selectedOption)}close(){this.dialogRef.close()}get errorsForm(){return this.form.controls}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.so),c.Y36(s.WI),c.Y36(i.qu),c.Y36(g.s))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-centrals-info"]],decls:43,vars:8,consts:[[1,"modal-header1","text-left","row","mb-1"],[1,"modal-title"],["type","button",1,"close","mt--5","mr--2",3,"click"],[1,"fa","fa-times","icon-modal-close"],[1,"mat-typography"],["autocomplete","off",1,"form-horizontal",3,"formGroup"],[1,"row"],[1,"col-md-12"],[1,"row","gx-3"],["appearance","outline",1,"col-xs-12","col-sm-3","col-md-3",2,"border","2px #000000"],["formControlName","typeEvent","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","typeEvent","formControlName","typeEvent","oninput","javascript:this.value=this.value.toUpperCase();"],[4,"ngIf"],["type","date","matInput","","name","startDate","formControlName","startDate"],["type","date","matInput","","name","endDate","formControlName","endDate"],[1,"d-flex","justify-content-center","align-items-center","col-xs-12","col-sm-3","col-md-3"],["type","button",1,"btn","btn-fill","btn-info","btn-md","mt-2",3,"disabled","click"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h6",1),c._uU(2),c.qZA(),c.TgZ(3,"button",2),c.NdJ("click",function(){return e.close()}),c._UZ(4,"i",3),c.qZA(),c.qZA(),c.TgZ(5,"mat-dialog-content",4),c.TgZ(6,"form",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"mat-form-field",9),c.TgZ(11,"mat-label"),c._uU(12,"Tipo de evento"),c.qZA(),c.TgZ(13,"mat-select",10),c.YNc(14,y,2,2,"mat-option",11),c.qZA(),c._UZ(15,"input",12),c.YNc(16,I,2,0,"mat-error",13),c.qZA(),c.TgZ(17,"mat-form-field",9),c.TgZ(18,"mat-label"),c._uU(19,"Desde"),c.qZA(),c._UZ(20,"input",14),c.YNc(21,k,2,0,"mat-error",13),c.qZA(),c.TgZ(22,"mat-form-field",9),c.TgZ(23,"mat-label"),c._uU(24,"Hasta"),c.qZA(),c._UZ(25,"input",15),c.YNc(26,E,2,0,"mat-error",13),c.qZA(),c.TgZ(27,"div",16),c.TgZ(28,"button",17),c.NdJ("click",function(){return e.searchInfo()}),c._uU(29," Filtrar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(30,"table",18),c.TgZ(31,"thead"),c.TgZ(32,"tr"),c.TgZ(33,"th"),c._uU(34,"Tipo de evento"),c.qZA(),c.TgZ(35,"th"),c._uU(36,"Fecha"),c.qZA(),c.TgZ(37,"th"),c._uU(38,"Hora"),c.qZA(),c.TgZ(39,"th"),c._uU(40,"Estado"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"tbody"),c.YNc(42,J,2,1,"tr",19),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Oqu(e.centralName),c.xp6(4),c.Q6J("formGroup",e.form),c.xp6(8),c.Q6J("ngForOf",e.options),c.xp6(2),c.Q6J("ngIf",e.errorsForm.typeEvent.touched&&(null==e.errorsForm.typeEvent.errors?null:e.errorsForm.typeEvent.errors.required)),c.xp6(5),c.Q6J("ngIf",e.errorsForm.startDate.touched&&(null==e.errorsForm.startDate.errors?null:e.errorsForm.startDate.errors.required)),c.xp6(5),c.Q6J("ngIf",e.errorsForm.endDate.touched&&(null==e.errorsForm.endDate.errors?null:e.errorsForm.endDate.errors.required)),c.xp6(2),c.Q6J("disabled",e.form.invalid),c.xp6(14),c.Q6J("ngForOf",e.information))},directives:[s.xY,i._Y,i.JL,i.sg,m.KE,m.hX,N.gD,i.JJ,i.u,i.Q7,r.sg,f.Nt,i.Fj,r.O5,U.ey,m.TO],styles:[".card-padding[_ngcontent-%COMP%]{padding:10px}"]}),t})();var M=o(99692);function Y(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"a",26),c.NdJ("click",function(){c.CHM(t);const e=c.oxw().$implicit;return c.oxw(2).openModal("Editar",e)}),c._UZ(1,"i",27),c.qZA()}}function P(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",19),c._uU(2),c.qZA(),c.TgZ(3,"td",19),c._uU(4),c.qZA(),c.TgZ(5,"td",19),c._uU(6),c.qZA(),c.TgZ(7,"td",20),c.TgZ(8,"a",21),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).openInfoModal(e)}),c._UZ(9,"i",22),c.qZA(),c.TgZ(10,"a",23),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).showUsers(e)}),c._UZ(11,"i",24),c.qZA(),c.YNc(12,Y,2,0,"a",25),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,o=c.oxw(2);c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Oqu(t.identifier),c.xp6(2),c.Oqu(t.description),c.xp6(6),c.Q6J("ngIf","SUPER-ADMIN"===o.role)}}function Q(t,e){if(1&t&&(c.TgZ(0,"tbody"),c.YNc(1,P,13,4,"tr",18),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",t.neighborhoods)}}function D(t,e){1&t&&(c.TgZ(0,"p",28),c._uU(1,"No existen registros"),c.qZA())}function S(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.TgZ(2,"div",29),c.TgZ(3,"mat-paginator",30,31),c.NdJ("page",function(e){return c.CHM(t),c.oxw().changePage(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(3),c.Q6J("length",t.pagination.total)("pageSize",t.pagination.itemsPage)}}function z(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",32),c.NdJ("click",function(){return c.CHM(t),c.oxw().openModal("Agregar")}),c._UZ(1,"img",33),c.qZA()}}const L=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e,o,r,i){this.api=t,this.route=e,this.fb=o,this.dialog=r,this.router=i,this.neighborhoods=[],this.teams=[],this.selectTeam=!1,this.pagination={page:1,pages:1,itemsPage:10,total:1},this.wordToSearch="",this.count=0,this.countTeams=0,this.role="";let n=JSON.parse(atob(e.snapshot.paramMap.get("parameters")));this.team=n}ngOnInit(){this.role=localStorage.getItem("role"),this.createForm(),this.getNeighborhoodByTeam()}createForm(){this.searchForm=this.fb.group({value:[""]})}getNeighborhoodByTeam(){this.wordToSearch=this.searchForm.value.value,this.api.getNeighborhoodByTeam(this.team.id,this.pagination.page,this.pagination.itemsPage,this.wordToSearch).subscribe(t=>{this.neighborhoods=t.body.neighborhoods,this.count=t.body.pagination.total,this.pagination=t.body.pagination},t=>{(0,d.w)("error","Error","Algo ha salido mal, intente m\xe1s tarde!","btn btn-info")})}changePage(t){this.pagination.page=t.pageIndex+1,this.getNeighborhoodByTeam()}openModal(t,e){this.dialog.open(w,{width:"800px",data:{title:t,neighs:e,idTeam:this.team.id}}).afterClosed().subscribe(t=>{this.getNeighborhoodByTeam()})}openInfoModal(t){this.dialog.open(O,{width:"750px",data:{central:t}}).afterClosed().subscribe(t=>{})}showUsers(t){let e=btoa(JSON.stringify({id:t._id,name:t.name,identifier:t.identifier,team:this.team}));this.router.navigate(["list-neighbour/"+e])}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.s),c.Y36(a.gz),c.Y36(i.qu),c.Y36(s.uw),c.Y36(a.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-neighborhoods"]],decls:36,vars:7,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"header"],[1,"title"],[1,"category"],[1,"form-horizontal",3,"formGroup"],["appearance","outline",1,"col-xs-12","col-sm-12","col-md-12",2,"border","2px #000000"],["matInput","","name","value","formControlName","value",3,"keyup"],[1,"content","table-responsive","table-full-width"],[1,"table"],[1,"text-right"],[4,"ngIf"],["class","msg-empty",4,"ngIf"],["class","container-fluid",4,"ngIf"],["id","addBtn","class","btn btn-icon btn-round btn-twitter",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"td-size"],[1,"td-actions","text-right"],["rel","tooltip","title","Informaci\xf3n",1,"btn","btn-danger","btn-simple","btn-xs",3,"click"],[1,"fa","fa-info"],["rel","tooltip","title","Ver usuario",1,"btn","btn-primary","btn-simple","btn-xs",3,"click"],[1,"fa","fa-eye"],["rel","tooltip","title","Editar","class","btn btn-warning btn-simple btn-xs",3,"click",4,"ngIf"],["rel","tooltip","title","Editar",1,"btn","btn-warning","btn-simple","btn-xs",3,"click"],[1,"fa","fa-edit"],[1,"msg-empty"],[1,"col","d-flex","justify-content-end"],["showFirstLastButtons","",3,"length","pageSize","page"],["paginator",""],["id","addBtn",1,"btn","btn-icon","btn-round","btn-twitter",3,"click"],["src","assets/img/icons/mas.png"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"h4",6),c._uU(7),c.qZA(),c._UZ(8,"p",7),c.qZA(),c._UZ(9,"br"),c.TgZ(10,"form",8),c.TgZ(11,"div",3),c.TgZ(12,"div",2),c.TgZ(13,"mat-form-field",9),c.TgZ(14,"mat-label"),c._uU(15,"Buscar por nombre, identificador o descripci\xf3n"),c.qZA(),c.TgZ(16,"input",10),c.NdJ("keyup",function(){return e.getNeighborhoodByTeam()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(17,"br"),c.TgZ(18,"div",11),c.TgZ(19,"table",12),c.TgZ(20,"thead"),c.TgZ(21,"tr"),c.TgZ(22,"th"),c._uU(23,"Nombre"),c.qZA(),c.TgZ(24,"th"),c._uU(25,"Identificador"),c.qZA(),c.TgZ(26,"th"),c._uU(27,"Descripci\xf3n"),c.qZA(),c.TgZ(28,"th",13),c._uU(29,"Acciones"),c.qZA(),c.qZA(),c.qZA(),c.YNc(30,Q,2,1,"tbody",14),c.qZA(),c.YNc(31,D,2,0,"p",15),c.qZA(),c._UZ(32,"br"),c.YNc(33,S,5,2,"div",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"caption"),c.YNc(35,z,2,0,"button",17),c.qZA()),2&t&&(c.xp6(7),c.AsE("Centrales (",e.team.name,"): ",e.count,""),c.xp6(3),c.Q6J("formGroup",e.searchForm),c.xp6(20),c.Q6J("ngIf",e.neighborhoods.length>0),c.xp6(1),c.Q6J("ngIf",0===e.neighborhoods.length),c.xp6(2),c.Q6J("ngIf",0!==(null==e.neighborhoods?null:e.neighborhoods.length)),c.xp6(2),c.Q6J("ngIf","SUPER-ADMIN"===e.role||"ADMINISTRATOR"===e.role))},directives:[i._Y,i.JL,i.sg,m.KE,m.hX,f.Nt,i.Fj,i.JJ,i.u,r.O5,r.sg,M.NW],styles:['article[_ngcontent-%COMP%]{background-color:#1e1e1e}.profile[_ngcontent-%COMP%]:hover{border:1.5px solid #1DA1F2}.profile[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;flex-direction:column;width:100%;height:100%;background-color:#fff;border-radius:6px;position:relative;border:3px solid transparent;background-clip:padding-box;text-align:center;color:#f1f3f3;transition:transform .2s;border:.4px solid #0101018b}.profile[_ngcontent-%COMP%]:after{content:"";display:block;top:-3px;left:-3px;bottom:-3px;right:-3px;z-index:-1;position:absolute;border-radius:16px}.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%!important;min-height:222px;max-height:222px;border-radius:5px 5px 0 0}.profile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:48%}.profile[_ngcontent-%COMP%]   .name-event[_ngcontent-%COMP%]{margin-top:4px;font-size:14px;font-weight:bold;color:#000}']}),t})()}]}];var R=o(12640),j=o(44368),H=o(75920);let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({providers:[p.ju],imports:[[r.ez,i.u5,i.UX,n.P4.forRoot(),a.Bz.forChild(L),R.q,j.bB,H.K]]}),t})()}}]);