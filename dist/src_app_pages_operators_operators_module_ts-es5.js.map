{"version":3,"mappings":"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","names":["AddOperatorsComponent","dialogRef","dialog","data","fb","api","events","disableClose","title","operator","role","localStorage","getItem","createForm","initFormPermissions","form","group","ci","_angular_forms__WEBPACK_IMPORTED_MODULE_5__","fullName","email","password","permissions","p1","p2","p3","p4","p5","p6","p7","putOperator","postOperator","event","keyCode","returnValue","postOperators","value","subscribe","next","res","status","then","result","close","body","message","error","err","includes","putOperators","_id","resetPaswordOperator","controls","get","setValue","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__","_angular_core__WEBPACK_IMPORTED_MODULE_7__","args","src_app_services_api_service__WEBPACK_IMPORTED_MODULE_2__","typescript_events__WEBPACK_IMPORTED_MODULE_4__","selector","template","OperatorsComponent","router","page","pages","itemsPage","total","getOperators","searchForm","wordToSearch","pagination","resp","operators","administrators","count","opt","modal","open","_add_operators_add_operators_component__WEBPACK_IMPORTED_MODULE_3__","width","afterClosed","eventPage","pageIndex","_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__","_angular_forms__WEBPACK_IMPORTED_MODULE_6__","_angular_router__WEBPACK_IMPORTED_MODULE_7__","OperatorsModule","declarations","_operators_component__WEBPACK_IMPORTED_MODULE_0__","_add_operators_add_operators_component__WEBPACK_IMPORTED_MODULE_5__","imports","_angular_common__WEBPACK_IMPORTED_MODULE_8__","_angular_forms__WEBPACK_IMPORTED_MODULE_9__","ngx_bootstrap_tabs__WEBPACK_IMPORTED_MODULE_1__","_angular_router__WEBPACK_IMPORTED_MODULE_10__","_operators_routes__WEBPACK_IMPORTED_MODULE_2__","src_app_material_material_module__WEBPACK_IMPORTED_MODULE_3__","ngx_dropzone__WEBPACK_IMPORTED_MODULE_11__","providers","OperatorRoutes","path","children","component","__webpack_exports__"],"sources":["webpack:///src/app/pages/operators/add-operators/add-operators.component.ts","webpack:///src/app/pages/operators/operators.component.ts","webpack:///src/app/pages/operators/operators.module.ts","webpack:///src/app/pages/operators/operators.routes.ts","webpack:///src/app/pages/operators/add-operators/add-operators.component.html","webpack:///src/app/pages/operators/operators.component.html"],"sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { showAlert } from 'src/app/utils/swal-alert';\r\nimport { Event } from 'typescript.events';\r\n\r\n@Component({\r\n  selector: 'app-add-teams',\r\n  templateUrl: './add-operators.component.html',\r\n  styleUrls: ['./add-operators.component.scss']\r\n})\r\nexport class AddOperatorsComponent implements OnInit {\r\n  title = \"\";\r\n  form: FormGroup;\r\n  operator;\r\n  showPassword: boolean = false;\r\n  permissions: FormGroup;\r\n  role: string = '';\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<AddOperatorsComponent>,\r\n    public dialog: MatDialog,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private fb: FormBuilder,\r\n    public api: ApiService,\r\n    public events: Event\r\n  ) {\r\n    dialogRef.disableClose = true;\r\n    this.title = data.title;\r\n    this.operator = data.operator;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.role = localStorage.getItem('role');\r\n    this.createForm();\r\n    this.initFormPermissions();\r\n  }\r\n\r\n  createForm() {\r\n    this.form = this.fb.group({\r\n      ci: [(this.title === 'Agregar') ? '' : this.operator.ci, [Validators.required]],\r\n      fullName: [(this.title === 'Agregar') ? '' : this.operator.fullName, [Validators.required]],\r\n      email: [(this.title === 'Agregar') ? '' : this.operator.email, [Validators.required, Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')]],\r\n      role: [(this.title === 'Agregar') ? '' : this.operator.role, [Validators.required]],\r\n      password: [(this.title === 'Agregar') ? '123456' : null,\r\n      (this.title === 'Agregar') ? [Validators.required] : []],\r\n    });\r\n  }\r\n\r\n  initFormPermissions() {\r\n    this.permissions = this.fb.group({\r\n      p1: false,\r\n      p2: false,\r\n      p3: false,\r\n      p4: false,\r\n      p5: false,\r\n      p6: false,\r\n      p7: false,\r\n    });\r\n\r\n  }\r\n\r\n\r\n  configOperator() {\r\n    if (this.title === 'Editar') {\r\n      this.putOperator();\r\n    } else {\r\n      this.postOperator();\r\n    }\r\n  }\r\n\r\n  validarNumeros(event) {\r\n    if ((event.keyCode < 48) || (event.keyCode > 57)) event.returnValue = false;\r\n  }\r\n\r\n  postOperator() {\r\n    this.api.postOperators(this.form.value).subscribe({\r\n      next: (res) => {\r\n        switch (res?.status) {\r\n          case 200:\r\n            showAlert('success', 'Correcto', 'Operador creado correctamente', 'btn btn-fill btn-info').then((result: any) => {\r\n              this.close();\r\n            });\r\n            break;\r\n          default:\r\n            showAlert('error', 'Error', res.body.message, 'btn btn-fill btn-info');\r\n            break;\r\n        }\r\n      },\r\n      error: (err) => {\r\n        if (err.error.message.message.includes('email is already in use')) {\r\n          showAlert('error', 'Error', 'El correo electrónico proporcionado ya está registrado en el sistema. Por favor, ingresa un correo electrónico diferente.', 'btn btn-info');\r\n        } else {\r\n          showAlert('error', 'Error', 'Algo ha salido mal, por favor inténtalo de nuevo más tarde.', 'btn btn-info');\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  putOperator() {\r\n    this.api.putOperators(this.form.value, this.operator._id).subscribe({\r\n      next: (res) => {\r\n        switch (res?.status) {\r\n          case 200:\r\n            showAlert('success', 'Correcto', 'Operador actualizado correctamente', 'btn btn-fill btn-info').then((result: any) => {\r\n              this.close();\r\n            });\r\n            break;\r\n          default:\r\n            showAlert('error', 'Error', res.body.message, 'btn btn-fill btn-info');\r\n            break;\r\n        }\r\n      },\r\n      error: (err) => {\r\n        if (err.error.message.message.includes('email is already in use')) {\r\n          showAlert('error', 'Error', 'El correo electrónico proporcionado ya está registrado en el sistema. Por favor, ingresa un correo electrónico diferente.', 'btn btn-info');\r\n        } else {\r\n          showAlert('error', 'Error', 'Algo ha salido mal, por favor inténtalo de nuevo más tarde.', 'btn btn-info');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  resetPaswordOperator() {\r\n    this.api.resetPaswordOperator({ password: \"123456\" }, this.operator._id).subscribe({\r\n      next: (res) => {\r\n        switch (res?.status) {\r\n          case 200:\r\n            showAlert('success', 'Correcto', 'Contraseña actualizada correctamente', 'btn btn-fill btn-info').then((result: any) => {\r\n              this.close();\r\n            });\r\n            break;\r\n          default:\r\n            showAlert('error', 'Error', res.body.message, 'btn btn-fill btn-info');\r\n            break;\r\n        }\r\n      },\r\n      error: (err) => {\r\n\r\n        showAlert('error', 'Error', 'Algo ha salido mal, por favor inténtalo de nuevo más tarde.', 'btn btn-info');\r\n\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  get errorsForm() { return this.form.controls; }\r\n\r\n  selectedRole(value) {\r\n    this.form.get('role').setValue(value);\r\n  }\r\n\r\n  close() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { Router } from '@angular/router';\r\nimport { IPagination } from 'src/app/components/pagination/pagination.interface';\r\nimport { ApiService } from 'src/app/services/api.service';\r\nimport { AddOperatorsComponent } from './add-operators/add-operators.component';\r\nimport { PageEvent } from '@angular/material/paginator';\r\nimport { showAlert } from 'src/app/utils/swal-alert';\r\n\r\n@Component({\r\n  selector: 'app-operators',\r\n  templateUrl: './operators.component.html',\r\n  styleUrls: ['./operators.component.scss']\r\n})\r\nexport class OperatorsComponent implements OnInit {\r\n  operators: any[] = [];\r\n  searchForm: FormGroup;\r\n  pagination: IPagination = { page: 1, pages: 1, itemsPage: 10, total: 1 };\r\n  wordToSearch: string = '';\r\n  count: number = 0;\r\n\r\n  constructor(\r\n    public dialog: MatDialog,\r\n    public fb: FormBuilder,\r\n    private api: ApiService,\r\n    public router: Router,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.createForm();\r\n    this.getOperators();\r\n  }\r\n\r\n  createForm() {\r\n    this.searchForm = this.fb.group({\r\n      value: ['']\r\n    });\r\n  }\r\n\r\n  getOperators() {\r\n    this.wordToSearch = this.searchForm.value.value;\r\n    this.api.getOperators(this.pagination.page, this.pagination.itemsPage, this.wordToSearch).subscribe({\r\n      next: (resp: any) => {\r\n        this.operators = resp.body.administrators;\r\n        this.pagination = resp.body.pagination;\r\n        this.count = resp.body.pagination.total;\r\n      },\r\n      error: (err) => {\r\n        showAlert('error', 'Error', 'Algo ha salido mal, intente más tarde!', 'btn btn-info');\r\n      }\r\n    });\r\n  }\r\n\r\n  openModal(opt, operator?) {\r\n    const modal = this.dialog.open(AddOperatorsComponent, {\r\n      width: '400px',\r\n      data: {\r\n        title: opt,\r\n        operator\r\n      }\r\n    });\r\n\r\n    modal.afterClosed().subscribe(result => {\r\n      this.getOperators();\r\n    });\r\n  }\r\n\r\n  changePage(eventPage: PageEvent) {\r\n    this.pagination.page = eventPage.pageIndex + 1;\r\n    this.getOperators();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OperatorsComponent } from './operators.component';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TabsModule } from 'ngx-bootstrap/tabs';\r\nimport { RouterModule } from '@angular/router';\r\nimport { OperatorRoutes } from './operators.routes';\r\nimport { MaterialModule } from 'src/app/material/material.module';\r\nimport { NgxDropzoneModule } from 'ngx-dropzone';\r\nimport { Event } from 'typescript.events';\r\nimport { AddOperatorsComponent } from './add-operators/add-operators.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    OperatorsComponent,\r\n    AddOperatorsComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    TabsModule.forRoot(),\r\n    RouterModule.forChild(OperatorRoutes),\r\n    MaterialModule,\r\n    NgxDropzoneModule\r\n  ],\r\n  providers: [\r\n    Event\r\n  ]\r\n})\r\nexport class OperatorsModule { }\r\n","import  { Routes } from '@angular/router';\r\nimport { OperatorsComponent } from './operators.component';\r\n\r\n\r\nexport const OperatorRoutes: Routes = [\r\n    {\r\n        path: '',\r\n        children: [{\r\n            path: '',\r\n            component: OperatorsComponent\r\n        }]\r\n    }\r\n];","export default \"<div class=\\\"modal-header1 text-left row mb-1\\\">\\r\\n  <h6 class=\\\"modal-title\\\">{{title}} Operador</h6>\\r\\n  <button type=\\\"button\\\" class=\\\"close mt--5 mr--2\\\" (click)=\\\"close()\\\">\\r\\n    <i class=\\\"fa fa-times icon-modal-close\\\"></i>\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n<mat-dialog-content class=\\\"mat-typography\\\">\\r\\n  <form class=\\\"form-horizontal\\\" [formGroup]=\\\"form\\\" autocomplete=\\\"off\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"col-md-12\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n\\r\\n          <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\" style=\\\"border: 2px #000000;\\\">\\r\\n            <mat-label>Rol</mat-label>\\r\\n            <mat-select formControlName=\\\"role\\\" (selectionChange)=\\\"selectedRole($event.value)\\\">\\r\\n              <mat-option *ngIf=\\\"role === 'SUPER-ADMIN'\\\" value=\\\"SUPER-ADMIN\\\">Super Administrador</mat-option>\\r\\n              <mat-option value=\\\"ADMINISTRATOR\\\">Administrador</mat-option>\\r\\n              <mat-option value=\\\"OPERATOR\\\">Operador</mat-option>\\r\\n              <mat-option value=\\\"USER\\\">Usuario</mat-option>\\r\\n            </mat-select>\\r\\n            <mat-error *ngIf=\\\"(errorsForm.role.touched) && errorsForm.role.errors?.required\\\">\\r\\n              Tipo es obligatorio\\r\\n            </mat-error>\\r\\n          </mat-form-field>\\r\\n\\r\\n          <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\" style=\\\"border: 2px #000000;\\\">\\r\\n            <mat-label>Cédula</mat-label>\\r\\n            <input matInput name=\\\"ci\\\" formControlName=\\\"ci\\\" (keypress)=\\\"validarNumeros($event)\\\">\\r\\n            <mat-error *ngIf=\\\"(errorsForm.ci.touched) && errorsForm.ci.errors?.required\\\">\\r\\n              Campo obligatorio\\r\\n            </mat-error>\\r\\n          </mat-form-field>\\r\\n\\r\\n          <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\" style=\\\"border: 2px #000000;\\\">\\r\\n            <mat-label>Nombre</mat-label>\\r\\n            <input matInput name=\\\"fullName\\\" formControlName=\\\"fullName\\\">\\r\\n            <mat-error *ngIf=\\\"(errorsForm.fullName.touched) && errorsForm.fullName.errors?.required\\\">\\r\\n              Campo obligatorio\\r\\n            </mat-error>\\r\\n          </mat-form-field>\\r\\n\\r\\n          <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\" style=\\\"border: 2px #000000;\\\">\\r\\n            <mat-label>Correo Electrónico</mat-label>\\r\\n            <input matInput name=\\\"email\\\" formControlName=\\\"email\\\"\\r\\n              oninput=\\\"javascript:this.value=this.value.toLowerCase();\\\">\\r\\n            <mat-error *ngIf=\\\"(errorsForm.email.touched) && errorsForm.email.errors?.required\\\">\\r\\n              Campo obligatorio\\r\\n            </mat-error>\\r\\n          </mat-form-field>\\r\\n\\r\\n          <!-- <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\"\\r\\n                        style=\\\"border: 2px #000000;\\\">\\r\\n                        <mat-label>Contraseña</mat-label>\\r\\n                        <input matInput [type]=\\\"showPassword ? 'text' : 'password'\\\" name=\\\"password\\\"\\r\\n                            formControlName=\\\"password\\\">\\r\\n                        <mat-icon style=\\\"cursor: pointer;\\\" matSuffix (click)=\\\"showPassword = !showPassword\\\">\\r\\n                            {{showPassword?'visibility_off':'visibility'}}\\r\\n                        </mat-icon>\\r\\n                        <mat-error *ngIf=\\\"(errorsForm.password.touched) && errorsForm.password.errors?.required\\\">\\r\\n                            Campo obligatorio\\r\\n                        </mat-error>\\r\\n                    </mat-form-field> -->\\r\\n          <hr>\\r\\n          <!--PERMISSIONS-->\\r\\n          <!-- <div class=\\\"ml-3\\\">\\r\\n                        <section [formGroup]=\\\"permissions\\\">\\r\\n                            <h2 class=\\\"font-weight-bold\\\">Permisos:</h2>\\r\\n                            <p><mat-checkbox formControlName=\\\"p1\\\"  color=\\\"primary\\\">Manejo de cuentas administrador</mat-checkbox></p>\\r\\n                            <p><mat-checkbox formControlName=\\\"p2\\\" color=\\\"primary\\\">Manejo de cuentas de usuario</mat-checkbox></p>\\r\\n\\r\\n                            <p><mat-checkbox formControlName=\\\"p3\\\" color=\\\"primary\\\">Manejo de teams</mat-checkbox></p>\\r\\n                            <p><mat-checkbox formControlName=\\\"p4\\\" color=\\\"primary\\\">Manejo de centrales</mat-checkbox></p>\\r\\n                            <p><mat-checkbox formControlName=\\\"p5\\\" color=\\\"primary\\\">Generar reportes</mat-checkbox></p>\\r\\n\\r\\n                            <p><mat-checkbox formControlName=\\\"p6\\\" color=\\\"primary\\\">Operador de alarmas</mat-checkbox></p>\\r\\n                            <p><mat-checkbox formControlName=\\\"p7\\\" color=\\\"primary\\\">Ver alarmas pendietes espejo</mat-checkbox></p>\\r\\n                        </section>\\r\\n\\r\\n                        <section [formGroup]=\\\"permissions\\\">\\r\\n                            <h4>You chose:</h4>\\r\\n                            {{permissions.value | json}}\\r\\n                        </section>\\r\\n                    </div> -->\\r\\n\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </form>\\r\\n</mat-dialog-content>\\r\\n\\r\\n<div mat-dialog-actions align=\\\"star\\\" class=\\\"dialog-footer\\\" *ngIf=\\\"this.title === 'Editar'\\\">\\r\\n  <button class=\\\"btn btn-fill btn-danger btn-md\\\" (click)=\\\"resetPaswordOperator()\\\" type=\\\"button\\\">\\r\\n    Restablecer Contraseña\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n<div mat-dialog-actions align=\\\"end\\\" class=\\\"dialog-footer\\\">\\r\\n  <button class=\\\"btn btn-fill btn-info btn-md\\\" (click)=\\\"configOperator()\\\" [disabled]=\\\"!form.valid\\\" type=\\\"button\\\">\\r\\n    Guardar\\r\\n  </button>\\r\\n</div>\\r\\n\";","export default \"<div class=\\\"main-content\\\">\\r\\n    <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-12\\\">\\r\\n                <div class=\\\"card\\\">\\r\\n                    <div class=\\\"header\\\">\\r\\n                        <h4 class=\\\"title\\\">Operadores: {{count}}</h4>\\r\\n                        <p class=\\\"category\\\"></p>\\r\\n                    </div>\\r\\n                    <br>\\r\\n                    <form [formGroup]=\\\"searchForm\\\" class=\\\"form-horizontal\\\">\\r\\n                        <div class=\\\"col-md-12\\\">\\r\\n                            <div class=\\\"row\\\">\\r\\n                                <mat-form-field class=\\\"col-xs-12 col-sm-12 col-md-12\\\" appearance=\\\"outline\\\"\\r\\n                                    style=\\\"border: 2px #000000;\\\">\\r\\n                                    <mat-label>Buscar por nombre</mat-label>\\r\\n                                    <input matInput name=\\\"value\\\" (keyup)=\\\"getOperators()\\\" formControlName=\\\"value\\\">\\r\\n                                </mat-form-field>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </form>\\r\\n                    <br>\\r\\n                    <div class=\\\"content table-responsive table-full-width\\\">\\r\\n                        <table class=\\\"table\\\">\\r\\n                            <thead>\\r\\n                                <tr>\\r\\n                                    <th>Cédula</th>\\r\\n                                    <th>Nombre</th>\\r\\n                                    <th>Correo</th>\\r\\n                                    <th>Rol</th>\\r\\n                                    <th class=\\\"text-right\\\">Acciones</th>\\r\\n                                </tr>\\r\\n                            </thead>\\r\\n                            <tbody *ngIf=\\\"operators.length > 0\\\">\\r\\n                                <tr *ngFor=\\\"let item of operators; let i=index;\\\">\\r\\n                                    <td class=\\\"td-size\\\">{{item?.ci}}</td>\\r\\n                                    <td class=\\\"td-size\\\">{{item?.fullName}}</td>\\r\\n                                    <td class=\\\"td-size\\\">{{item?.email}}</td>\\r\\n                                    <td class=\\\"td-size\\\">{{item?.role}}</td>\\r\\n                                    <td class=\\\"td-actions text-right\\\">\\r\\n                                        <!-- <a (click)=\\\"showUsers(item)\\\" rel=\\\"tooltip\\\" title=\\\"Ver usuario\\\" class=\\\"btn btn-primary btn-simple btn-xs\\\">\\r\\n                                            <i class=\\\"fa fa-eye\\\"></i>\\r\\n                                        </a> -->\\r\\n                                        <a (click)=\\\"openModal('Editar', item)\\\" rel=\\\"tooltip\\\" title=\\\"Editar\\\"\\r\\n                                            class=\\\"btn btn-warning btn-simple btn-xs\\\">\\r\\n                                            <i class=\\\"fa fa-edit\\\"></i>\\r\\n                                        </a>\\r\\n                                    </td>\\r\\n                                </tr>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                        <p class=\\\"msg-empty\\\" *ngIf=\\\"operators.length ===  0\\\">No existen registros</p>\\r\\n                    </div>\\r\\n                    <br>\\r\\n                    <div *ngIf=\\\"operators?.length !==0\\\" class=\\\"container-fluid\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                            <div class=\\\"col d-flex justify-content-end\\\">\\r\\n                                <mat-paginator #paginator showFirstLastButtons [length]=\\\"pagination.total\\\"\\r\\n                                    [pageSize]=\\\"pagination.itemsPage\\\" (page)=\\\"changePage($event)\\\">\\r\\n                                </mat-paginator>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n<caption>\\r\\n    <button (click)=\\\"openModal('Agregar')\\\" id=\\\"addBtn\\\" class=\\\"btn btn-icon btn-round btn-twitter\\\">\\r\\n        <img src=\\\"assets/img/icons/mas.png\\\">\\r\\n    </button>\\r\\n</caption>\";"]}